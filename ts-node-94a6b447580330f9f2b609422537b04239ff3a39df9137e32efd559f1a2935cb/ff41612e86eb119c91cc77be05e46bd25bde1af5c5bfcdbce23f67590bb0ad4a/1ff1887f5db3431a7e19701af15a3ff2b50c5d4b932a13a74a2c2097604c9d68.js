"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs = require("fs");
var protractor_1 = require("protractor");
var products_wg_1 = require("./products/products.wg");
var search_wg_1 = require("./common/search/search.wg");
var productModel_wg_1 = require("./products/productModel.wg");
var cart_wg_1 = require("./common/cart/cart.wg");
function screen(name) {
    protractor_1.browser.takeScreenshot()
        .then(function (png) {
        var stream = fs.createWriteStream("./" + name + ".png");
        stream.write(new Buffer(png, 'base64'));
        stream.end();
    });
}
describe('angular-course App', function () {
    var productsWidget = new products_wg_1.ProductsWidget();
    var searchWidget = new search_wg_1.SearchWidget();
    var productsModalWidget = new productModel_wg_1.ProductsModalWidget();
    var cartWidget = new cart_wg_1.CartWidget();
    beforeEach(function () {
        protractor_1.browser.get('/');
    });
    it('should search by term', function () {
        searchWidget.search('DRAGBOTasdasdasdasd');
        expect(productsWidget.cards.count())
            .toEqual(0);
        //
        searchWidget.searchInput.clear();
        searchWidget.search('DRAGBOT');
        expect(productsWidget.cards.count())
            .toEqual(1);
        screen('img');
    });
    it('should display card modal', function () {
        productsWidget.openFullCard(3);
        expect(productsModalWidget.title.getText())
            .toEqual('BARKARAMA');
        expect(productsModalWidget.price.getText())
            .toEqual('1951.37');
        screen('img1');
    });
    it('should add to product cart', function () {
        [1, 3, 7].forEach(function (index) {
            productsWidget.openFullCard(index);
            productsModalWidget.buy();
        });
        expect(cartWidget.counter.getText())
            .toEqual('3');
        screen('img2');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL3Zhci93d3cvYW5ndWxhci1jb3Vyc2UvZTJlL2FwcC5lMmUtc3BlYy50cyIsInNvdXJjZXMiOlsiL3Zhci93d3cvYW5ndWxhci1jb3Vyc2UvZTJlL2FwcC5lMmUtc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVCQUF5QjtBQUN6Qix5Q0FBcUM7QUFFckMsc0RBQXdEO0FBQ3hELHVEQUF5RDtBQUN6RCw4REFBaUU7QUFDakUsaURBQW1EO0FBRW5ELGdCQUFnQixJQUFZO0lBQzFCLG9CQUFPLENBQUMsY0FBYyxFQUFFO1NBQ3JCLElBQUksQ0FBQyxVQUFDLEdBQVc7UUFDaEIsSUFBTSxNQUFNLEdBQW1CLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxPQUFLLElBQUksU0FBTSxDQUFDLENBQUM7UUFDckUsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDZixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxRQUFRLENBQUMsb0JBQW9CLEVBQUU7SUFFN0IsSUFBTSxjQUFjLEdBQW1CLElBQUksNEJBQWMsRUFBRSxDQUFDO0lBQzVELElBQU0sWUFBWSxHQUFpQixJQUFJLHdCQUFZLEVBQUUsQ0FBQztJQUN0RCxJQUFNLG1CQUFtQixHQUF3QixJQUFJLHFDQUFtQixFQUFFLENBQUM7SUFDM0UsSUFBTSxVQUFVLEdBQWUsSUFBSSxvQkFBVSxFQUFFLENBQUM7SUFFaEQsVUFBVSxDQUFDO1FBQ1Qsb0JBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsdUJBQXVCLEVBQUU7UUFDMUIsWUFBWSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQzNDLE1BQU0sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ2pDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNkLEVBQUU7UUFDRixZQUFZLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBR2pDLFlBQVksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDL0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7YUFDakMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWQsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFO1FBQzlCLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUN4QyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDeEIsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUN4QyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDRCQUE0QixFQUFFO1FBQy9CLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxLQUFhO1lBQzlCLGNBQWMsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMsbUJBQW1CLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDNUIsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNqQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBicm93c2VyIH0gZnJvbSAncHJvdHJhY3Rvcic7XG5cbmltcG9ydCB7IFByb2R1Y3RzV2lkZ2V0IH0gZnJvbSAnLi9wcm9kdWN0cy9wcm9kdWN0cy53Zyc7XG5pbXBvcnQgeyBTZWFyY2hXaWRnZXQgfSBmcm9tICcuL2NvbW1vbi9zZWFyY2gvc2VhcmNoLndnJztcbmltcG9ydCB7IFByb2R1Y3RzTW9kYWxXaWRnZXQgfSBmcm9tICcuL3Byb2R1Y3RzL3Byb2R1Y3RNb2RlbC53Zyc7XG5pbXBvcnQgeyBDYXJ0V2lkZ2V0IH0gZnJvbSAnLi9jb21tb24vY2FydC9jYXJ0LndnJztcblxuZnVuY3Rpb24gc2NyZWVuKG5hbWU6IHN0cmluZyk6IHZvaWQge1xuICBicm93c2VyLnRha2VTY3JlZW5zaG90KClcbiAgICAudGhlbigocG5nOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IHN0cmVhbTogZnMuV3JpdGVTdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShgLi8ke25hbWV9LnBuZ2ApO1xuICAgICAgc3RyZWFtLndyaXRlKG5ldyBCdWZmZXIocG5nLCAnYmFzZTY0JykpO1xuICAgICAgc3RyZWFtLmVuZCgpO1xuICAgIH0pO1xufVxuXG5kZXNjcmliZSgnYW5ndWxhci1jb3Vyc2UgQXBwJywgKCkgPT4ge1xuXG4gIGNvbnN0IHByb2R1Y3RzV2lkZ2V0OiBQcm9kdWN0c1dpZGdldCA9IG5ldyBQcm9kdWN0c1dpZGdldCgpO1xuICBjb25zdCBzZWFyY2hXaWRnZXQ6IFNlYXJjaFdpZGdldCA9IG5ldyBTZWFyY2hXaWRnZXQoKTtcbiAgY29uc3QgcHJvZHVjdHNNb2RhbFdpZGdldDogUHJvZHVjdHNNb2RhbFdpZGdldCA9IG5ldyBQcm9kdWN0c01vZGFsV2lkZ2V0KCk7XG4gIGNvbnN0IGNhcnRXaWRnZXQ6IENhcnRXaWRnZXQgPSBuZXcgQ2FydFdpZGdldCgpO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGJyb3dzZXIuZ2V0KCcvJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2VhcmNoIGJ5IHRlcm0nLCAoKSA9PiB7XG4gICAgc2VhcmNoV2lkZ2V0LnNlYXJjaCgnRFJBR0JPVGFzZGFzZGFzZGFzZCcpO1xuICAgIGV4cGVjdChwcm9kdWN0c1dpZGdldC5jYXJkcy5jb3VudCgpKVxuICAgICAgLnRvRXF1YWwoMCk7XG4gICAgLy9cbiAgICBzZWFyY2hXaWRnZXQuc2VhcmNoSW5wdXQuY2xlYXIoKTtcblxuXG4gICAgc2VhcmNoV2lkZ2V0LnNlYXJjaCgnRFJBR0JPVCcpO1xuICAgIGV4cGVjdChwcm9kdWN0c1dpZGdldC5jYXJkcy5jb3VudCgpKVxuICAgICAgLnRvRXF1YWwoMSk7XG5cbiAgICBzY3JlZW4oJ2ltZycpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRpc3BsYXkgY2FyZCBtb2RhbCcsICgpID0+IHtcbiAgICBwcm9kdWN0c1dpZGdldC5vcGVuRnVsbENhcmQoMyk7XG4gICAgZXhwZWN0KHByb2R1Y3RzTW9kYWxXaWRnZXQudGl0bGUuZ2V0VGV4dCgpKVxuICAgICAgLnRvRXF1YWwoJ0JBUktBUkFNQScpO1xuICAgIGV4cGVjdChwcm9kdWN0c01vZGFsV2lkZ2V0LnByaWNlLmdldFRleHQoKSlcbiAgICAgIC50b0VxdWFsKCcxOTUxLjM3Jyk7XG4gICAgc2NyZWVuKCdpbWcxJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYWRkIHRvIHByb2R1Y3QgY2FydCcsICgpID0+IHtcbiAgICBbMSwgMywgN10uZm9yRWFjaCgoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgcHJvZHVjdHNXaWRnZXQub3BlbkZ1bGxDYXJkKGluZGV4KTtcbiAgICAgIHByb2R1Y3RzTW9kYWxXaWRnZXQuYnV5KCk7XG4gICAgfSk7XG4gICAgZXhwZWN0KGNhcnRXaWRnZXQuY291bnRlci5nZXRUZXh0KCkpXG4gICAgICAudG9FcXVhbCgnMycpO1xuICAgIHNjcmVlbignaW1nMicpO1xuICB9KTtcbn0pO1xuIl19